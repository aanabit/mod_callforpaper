define("mod_callforpaper/deletepreset",["exports","core/notification","core/prefetch","core/str","core/ajax","core/url"],(function(_exports,_notification,_prefetch,_str,_ajax,_url){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Javascript module for deleting a callforpaper as a preset.
   *
   * @module      mod_callforpaper/deletepreset
   * @copyright   2022 Amaia Anabitarte <amaia@moodle.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_ajax=_interopRequireDefault(_ajax),_url=_interopRequireDefault(_url);const selectors_deletePresetButton='[data-action="deletepreset"]';_exports.init=()=>{(0,_prefetch.prefetchStrings)("mod_callforpaper",["deleteconfirm","deletewarning"]),(0,_prefetch.prefetchStrings)("core",["delete"]),registerEventListeners()};const registerEventListeners=()=>{document.addEventListener("click",(event=>{const deleteOption=event.target.closest(selectors_deletePresetButton);deleteOption&&(event.preventDefault(),deletePresetConfirm(deleteOption))}))},deletePresetConfirm=deleteOption=>{const presetName=deleteOption.getAttribute("data-presetname"),callforpaperId=deleteOption.getAttribute("data-callforpaperid");_notification.default.deleteCancelPromise((0,_str.getString)("deleteconfirm","mod_callforpaper",presetName),(0,_str.getString)("deletewarning","mod_callforpaper")).then((()=>async function(callforpaperId,presetName){var request={methodname:"mod_callforpaper_delete_saved_preset",args:{callforpaperid:callforpaperId,presetnames:{presetname:presetName}}};try{await _ajax.default.call([request])[0],window.location.href=_url.default.relativeUrl("mod/callforpaper/preset.php",{d:callforpaperId},!1)}catch(error){_notification.default.exception(error)}}(callforpaperId,presetName))).catch((()=>{}))}}));

//# sourceMappingURL=deletepreset.min.js.map